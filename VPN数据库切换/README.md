## VPN数据库故障自动切换不同模式

#### 描述：

1.  VPN使用Mysql数据库进行用户密码储存认证
2.  为了保证VPN正常认证并进行自动切换保证正常运行


#### 环境：

1.  Linux Centos
2.  OpenVpn服务端
3.  Mysql + 本地认证
4.  Python2.6+


## 对于mysql.sh文件描述：

1.  自定义变量，数据库信息，配置文件，认证文件等
2.  启动服务，使用了原生的service启动和systemctl启动
3.  发送邮件模块，使用python脚本方式调用

#### 对于mysql.sh文件四种模式：

1.  当主数据库正常，从数据库正常
2.  当主数据库出现问题，从数据库正常
3.  当主数据没有问题，从数据库用问题
4.  当主和从数据库都出现问题

## 对于mysql_reduction.sh文件描述：

1.  自定义变量
2.  启动服务
3.  删除相关文件，并还原


#### 对于mysql_reduction.sh文件三种模式：

1.  当主库正常，从库也是正常时
2.  当主库正常时，同时在vpn目录下出现有本地认证文件时
3.  当主库正常，从库不正常时


#### 参考文档：无。